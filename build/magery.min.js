var Magery=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:false};t[n].call(i.exports,i,i.exports,r);i.loaded=true;return i.exports}r.m=t;r.c=e;r.p="";return r(0)}([function(t,e,r){var n=r(1).Patcher;var i=r(6).eval;e.Template=r(7);e.compile=function(t,r){r=r||{};if(typeof t==="string"){return e.compile(document.querySelectorAll(t),r)}if(t instanceof NodeList){for(var n=0,a=t.length;n<a;n++){e.compile(t[n],r)}return r}if(t.tagName==="TEMPLATE"&&t.content){return e.compile(t.content,r)}var o=i(t);for(var s in o){r[s]=o[s]}return r};e.patch=function(t,e,r,i){new n(i).render(t,e,r)}},function(t,e,r){var n=r(2);var i=r(4);var a=r(3);var o=r(5);var s=1;var u=3;function l(t,e,r){return(t.tagName===e||t.nodeType===u&&e==="#text")&&t.key==r}function p(t,e,r,n){if(e&&l(e,r,n)){return e}if(n&&t.keymap){return t.keymap[n]||null}return null}function f(t,e,r){while(r){var n=r;r=r.nextSibling;t.removeChild(e,n)}}function c(t,e){var r=e.attributes;var n=[];var i,a;for(i=0,a=r.length;i<a;i++){var o=r[i];if(!e.visited_attributes.has(o.name)){n.push(o.name)}}for(i=0,a=n.length;i<a;i++){t.removeAttribute(e,n[i])}}function d(t,e){if(!e.handlers){return}for(var r in e.handlers){if(!e.visited_events.has(r)){t.removeEventListener(e,r,e.handlers[r].fn);delete e.handlers[r]}}}function h(t,e){this.transforms=e||n;this.root=t;this.reset()}e.Patcher=h;h.prototype.reset=function(){this.parent=this.root.parentNode;this.current=this.root};h.prototype.stepInto=function(t){if(t.visited_attributes){t.visited_attributes.clear()}else{t.visited_attributes=new o}if(t.visited_events){t.visited_events.clear()}else{t.visited_events=new o}this.parent=t;this.current=t.firstChild};h.prototype.enterTag=function(t,e){var r=p(this.parent,this.current,t,e);if(!r){r=this.transforms.insertElement(this.parent,this.current,t);if(e){if(!this.parent.keymap){this.parent.keymap={}}this.parent.keymap[e]=r;r.key=e}}else if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}if(!this.template_root){this.template_root=r}this.stepInto(r)};h.prototype.EVENT={};function m(t,e){return function(r){var n=t.handlers[e];if(n.name){var i=n.args.map(function(t){if(t===h.prototype.EVENT){return r}return t});var a=t.template.handlers[n.name];if(!a){throw new Error("on"+e+": no '"+n.name+"' handler defined")}a.apply(n.template_root,i)}}}function T(t,e){if(!t.handlers){t.handlers={}}if(!t.handlers.hasOwnProperty(e)){var r=m(t,e);t.handlers[e]={fn:r};n.addEventListener(t,e,r)}t.visited_events.add(e)}h.prototype.eventListener=function(t,e,r,n){var i=this.parent;if(i.template!==n){i.template=n}T(i,t);var a=i.handlers[t];a.name=e;a.args=r;a.template_root=this.template_root};h.prototype.attribute=function(t,e){var r=this.parent;if(r.getAttribute(t)!==e){this.transforms.setAttribute(r,t,e)}r.visited_attributes.add(t)};h.prototype.text=function(t){var e=p(this.parent,this.current,"#text",null);if(!e){e=this.transforms.insertTextNode(this.parent,this.current,t)}else if(e.textContent!==t){this.transforms.replaceText(e,t)}this.current=e.nextSibling};function v(t,e){return t.handlers&&t.handlers[e]&&t.handlers[e].fn}h.prototype.exitTag=function(){f(this.transforms,this.parent,this.current);var t=this.parent;this.parent=t.parentNode;this.current=t.nextSibling;c(this.transforms,t);d(this.transforms,t)};h.prototype.skip=function(t,e){var r=p(this.parent,this.current,t,e);if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}this.current=r.nextSibling};h.prototype.lookup=i.lookup;h.prototype.isTruthy=function(t){if(Array.isArray(t)){return t.length>0}return t};h.prototype.each=function(t,e,r,n){for(var a=0,o=r.length;a<o;a++){var s=i.shallowClone(t);s[e]=r[a];n(s)}};h.prototype.render=function(t,e,r,n,i,a){if(!t[e]){throw new Error("Template does not exist: <"+e+">")}var o=t[e];var s=this.template_root;this.template_root=null;o._render(o,t,this,r,n,i,a);this.template_root=s}},function(t,e,r){var n=r(3);e.insertTextNode=function(t,e,r){var n=document.createTextNode(r);t.insertBefore(n,e);return n};e.replaceText=function(t,e){t.textContent=e;return t};e.replaceChild=function(t,e,r){t.replaceChild(e,r);return e};e.appendChild=function(t,e){t.appendChild(e);return e};e.insertElement=function(t,e,r){var n=document.createElement(r);t.insertBefore(n,e);return n};e.removeChild=function(t,e){t.removeChild(e);return e};e.setAttribute=function(t,e,r){if(n.attributes[e]&n.USE_PROPERTY){t[e]=r}t.setAttribute(e,r);return t};e.removeAttribute=function(t,e){if(n.attributes[e]&n.USE_PROPERTY){t[e]=false}t.removeAttribute(e);return t};e.addEventListener=function(t,e,r){t.addEventListener(e,r,false);return t};e.removeEventListener=function(t,e,r){t.removeEventListener(e,r);return t}},function(t,e){var r=e.BOOLEAN_ATTRIBUTE=1;var n=e.USE_PROPERTY=2;var i=e.USE_STRING=4;e.attributes={allowfullscreen:r,async:r,autofocus:r,autoplay:r,capture:r,checked:r|n,controls:r,default:r,defer:r,disabled:r,formnovalidate:r,hidden:r,itemscope:r,loop:r,multiple:r|n,muted:r|n,novalidate:r,open:r,readonly:r,required:r,reversed:r,selected:r|n,value:n|i}},function(t,e){var r=1;var n=3;var i=11;e.isDocumentFragment=function(t){return t.nodeType===i};e.isElementNode=function(t){return t.nodeType===r};e.isTextNode=function(t){return t.nodeType===n};e.eachNode=function(t,e){var r=0;var n=t[0];while(n){var i=n;n=n.nextSibling;e(i,r++,t)}};e.mapNodes=function(t,r){var n=[];e.eachNode(t,function(e,i){n[i]=r(e,i,t)});return n};e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")};e.propertyPath=function(t){return t.split(".").filter(function(t){return t})};e.lookup=function(t,e){var r=t;for(var n=0,i=e.length;n<i;n++){if(r===undefined||r===null){return""}r=r[e[n]]}return r===undefined||r===null?"":r};e.templateTagName=function(t){var e=/^TEMPLATE-([^\s/>]+)/.exec(t.tagName);return e&&e[1].toLowerCase()};e.shallowClone=function(t){var e={};for(var r in t){e[r]=t[r]}return e};e.eachAttribute=function(t,e){var r=t.attributes;for(var n=0,i=t.attributes.length;n<i;n++){e(t.attributes[n].name,t.attributes[n].value)}}},function(t,e){if(typeof Set==="undefined"){function r(){this.values=[]}r.prototype.add=function(t){this.values.push(t)};r.prototype.has=function(t){return this.values.indexOf(t)!==-1};r.prototype.clear=function(){this.values=[]};t.exports=r}else{t.exports=Set}},function(module,exports,__webpack_require__){var utils=__webpack_require__(4);var html=__webpack_require__(3);var Template=__webpack_require__(7);var HTML_TAGS=["A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BASEFONT","BDI","BDO","BGSOUND","BIG","BLINK","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","CONTENT","DATA","DATALIST","DD","DEL","DETAILS","DFN","DIALOG","DIR","DIV","DL","DT","ELEMENT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMAGE","IMG","INPUT","INS","ISINDEX","KBD","KEYGEN","LABEL","LEGEND","LI","LINK","LISTING","MAIN","MAP","MARK","MARQUEE","MENU","MENUITEM","META","METER","MULTICOL","NAV","NOBR","NOEMBED","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PARAM","PICTURE","PLAINTEXT","PRE","PROGRESS","Q","RP","RT","RTC","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SHADOW","SLOT","SMALL","SOURCE","SPACER","SPAN","STRIKE","STRONG","STYLE","SUB","SUMMARY","SUP","TABLE","TBODY","TD","TEMPLATE","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","TT","U","UL","VAR","VIDEO","WBR","XMP"];var IGNORED_ATTRS=["data-each","data-if","data-unless","data-key"];function compileLookup(t){return"p.lookup(data, "+JSON.stringify(t)+")"}function compileTemplateContext(t){var e=[];utils.eachAttribute(t,function(t,r){if(IGNORED_ATTRS.indexOf(t)===-1){e.push(JSON.stringify(t)+": "+compileExpandVariables(r))}});return"{"+e.join(", ")+"}"}function compileListener(t,e){var r=e.indexOf("(");var n=e.lastIndexOf(")");var i=e.substring(0,r);var a=e.substring(r+1,n).split(",");var o=[];for(var s=0,u=a.length;s<u;s++){var l=utils.trim(a[s]);if(!l){continue}if(l==="event"){o.push("p.EVENT")}else{o.push(compileLookup(utils.propertyPath(l)))}}return"p.eventListener("+JSON.stringify(t)+", "+JSON.stringify(i)+", "+"["+o.join(", ")+"], "+"template);\n"}function compileExtraAttrs(t){var e="";utils.eachAttribute(t,function(t,r){var n=t.match(/^on(.*)/);if(n){e+=compileListener(n[1],r)}});return e}function compileElement(t,e,r,n){if(t.tagName==="TEMPLATE-EMBED"){return}if(t.tagName==="TEMPLATE-CHILDREN"){r("inner();\n");return}if(!n&&t.dataset.template){e.push(t);r("p.render(templates, "+JSON.stringify(t.dataset.template)+", data);\n");return}if(t.dataset.each){var i=t.dataset.each.split(/\s+in\s+/);var a=i[0];var o=utils.propertyPath(i[1]);r("p.each("+"data, "+JSON.stringify(a)+", "+compileLookup(o)+", "+"function (data) {\n")}if(t.dataset.if){var s=utils.propertyPath(t.dataset.if);r("if (p.isTruthy("+compileLookup(s)+")) {\n")}if(t.dataset.unless){var u=utils.propertyPath(t.dataset.unless);r("if (!p.isTruthy("+compileLookup(u)+")) {\n")}var l=true;if(t.tagName=="TEMPLATE-CALL"){r("p.render("+"templates"+", "+compileExpandVariables(t.getAttribute("template"))+", "+compileTemplateContext(t)+", "+(t.dataset.key?compileExpandVariables(t.dataset.key):"null")+", function () {"+compileExtraAttrs(t)+"}"+(t.childNodes.length?", function () {":");")+"\n");l=false}else if(HTML_TAGS.indexOf(t.tagName)===-1){r("p.render("+"templates"+", "+JSON.stringify(t.tagName.toLowerCase())+", "+compileTemplateContext(t)+", "+(t.dataset.key?compileExpandVariables(t.dataset.key):"null")+", function () {"+compileExtraAttrs(t)+"}"+(t.childNodes.length?", function () {":");")+"\n");l=false}else{if(n){if(t.dataset.key){r("p.enterTag("+JSON.stringify(t.tagName)+", "+"root_key || "+compileExpandVariables(t.dataset.key)+");\n")}else{r("p.enterTag("+JSON.stringify(t.tagName)+", root_key || null);\n")}}else if(t.dataset.key){r("p.enterTag("+JSON.stringify(t.tagName)+", "+compileExpandVariables(t.dataset.key)+");\n")}else{r("p.enterTag("+JSON.stringify(t.tagName)+", null);\n")}utils.eachAttribute(t,function(t,e){if(t==="data-template"){t="data-bind"}if(IGNORED_ATTRS.indexOf(t)!==-1){return}var n=t.match(/^on(.*)/);if(n){r(compileListener(n[1],e))}else if(html.attributes[t]&html.BOOLEAN_ATTRIBUTE){if(e===""){r("p.attribute("+JSON.stringify(t)+", true);\n")}else{r("if (p.isTruthy("+compileExpandVariables(e)+")) {\n");r("p.attribute("+JSON.stringify(t)+", true);\n");r("}\n")}}else{r("p.attribute("+JSON.stringify(t)+", "+compileExpandVariables(e)+");\n")}});if(n){r("if (extra_attrs) { extra_attrs(); }\n")}}utils.eachNode(t.childNodes,function(t){compileNode(t,e,r,false)});if(l){r("p.exitTag();\n")}else if(t.childNodes.length){r("});\n")}if(t.dataset.unless){r("}\n")}if(t.dataset.if){r("}\n")}if(t.dataset.each){r("});\n")}}function compileExpandVariables(t,e){var r=t.split(/{{\s*|\s*}}/);var n=r.length;var i=-1;while(++i<n){if(i%2){var a=utils.propertyPath(r[i]);r[i]=a}}if(n==1&&!r[0]&&e){return"true"}var o=[];var s=-1;while(++s<n){if(r[s].length){o.push(s%2?compileLookup(r[s]):JSON.stringify(r[s]))}}if(!o.length){return JSON.stringify("")}return o.join(" + ")}function compileText(t,e){var r=compileExpandVariables(t.textContent);if(r[0]==='"'){e("p.text("+r+");\n")}else{e('p.text("" + '+r+");\n")}}function compileDocumentFragment(t,e,r){utils.eachNode(t.childNodes,function(t){compileNode(t,e,r,false)})}function compileNode(t,e,r,n){switch(t.nodeType){case 1:compileElement(t,e,r,n);break;case 3:compileText(t,r);break;case 11:compileDocumentFragment(t,e,r);break}}function ignore_output(t){}exports.compile=function(t,e){var r=[];compileNode(t,r,ignore_output,!(t.dataset&&t.dataset.hasOwnProperty("template")));e("({\n");while(r.length){t=r.shift();e(JSON.stringify(t.dataset.template)+": ");e("new Template("+"function (template, templates, p, data, root_key, extra_attrs, inner) {\n");compileNode(t,r,e,true);e("})"+(r.length?",":"")+"\n")}e("})\n")};exports.compileToString=function(t){var e="(function (Template) { return ";exports.compile(t,function(t){e+=t});return e+"})"};exports.eval=function(node){return eval(exports.compileToString(node))(Template)}},function(t,e){function r(t){this._render=t;this.handlers={}}r.prototype.bind=function(t){this.handlers=t};t.exports=r}]);